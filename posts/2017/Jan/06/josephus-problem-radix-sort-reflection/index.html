<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Josephus Problem & Radix Sort Reflection - Zeyuan Hu's website</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="../../../../../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/">

        <meta name="author" content="Zeyuan Hu" />
        <meta name="keywords" content="c,double-linked-list" />
        <meta name="description" content="This post is a reflection on the two problems (MAW 3.13 &amp; 3.10) I have been working on for the past five days. Dynamic arrays in C One of the ways I try out to solve Josephus Problem is to use circular double linked list, which is implemented in ..." />

        <meta property="og:site_name" content="Zeyuan Hu's website" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Josephus Problem &amp; Radix Sort Reflection"/>
        <meta property="og:url" content="../../../../../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/"/>
        <meta property="og:description" content="This post is a reflection on the two problems (MAW 3.13 &amp; 3.10) I have been working on for the past five days. Dynamic arrays in C One of the ways I try out to solve Josephus Problem is to use circular double linked list, which is implemented in ..."/>
        <meta property="article:published_time" content="2017-01-06" />
            <meta property="article:section" content="programming languages" />
            <meta property="article:tag" content="c" />
            <meta property="article:tag" content="double-linked-list" />
            <meta property="article:author" content="Zeyuan Hu" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../../../../theme/css/bootstrap.lumen.min.css" type="text/css"/>
    <link href="../../../../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../../../../theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../theme/css/style.css" type="text/css"/>

        <link href="../../../../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Zeyuan Hu's website ATOM Feed"/>

        <link href="../../../../../feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Zeyuan Hu's website RSS Feed"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <a href="../../../../../" class="navbar-brand">
Zeyuan Hu's website            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../../../about-zack.html"><i class="fa fa-question"></i><span class="icon-label">About</span></a></li>
              <li><a href="../../../../../archives/index.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../../../../../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/"
                       rel="bookmark"
                       title="Permalink to Josephus Problem & Radix Sort Reflection">
                        Josephus Problem &amp; Radix Sort Reflection
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-01-06T00:34:00+08:00"> Fri 06 Jan 2017, 00:34</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="../../../../../tag/c.html">c</a>
        /
	<a href="../../../../../tag/double-linked-list.html">double-linked-list</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>This post is a reflection on the two problems (MAW 3.13 &amp; 3.10) I
have been working on for the past five days.</p>
<div class="section" id="dynamic-arrays-in-c">
<h2>Dynamic arrays in C</h2>
<p>One of the ways I try out to solve <a class="reference external" href="../../../../../posts/2016/Dec/31/josephus-problem/">Josephus Problem</a> is to use circular double linked list, which
is implemented in <a class="reference external" href="https://github.com/xxks-kkk/algo/blob/master/linkedList/josephus/circularLinkedList.c">ET circularDoubleLinkedListJosephus(ET N, ET M)</a>,
Inside the function, here is what I try to do initially:</p>
<div class="highlight"><pre><span></span><span class="n">ET</span> <span class="n">people</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">people</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>I try to make an array of consecutive numbers based upon the input <tt class="docutils literal">N</tt>. However, this way doesn't work in C because compiler has no clue
the size of array during compilation phase. This is what people called dynamic array in C. The following two pages offer execellent explanations
to dynamic array specific and array in C in general:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.mathcs.emory.edu/~cheung/Courses/255/Syllabus/2-C-adv-data/dyn-array.html">Dynamic arrays in C</a></li>
<li><a class="reference external" href="https://www.cs.swarthmore.edu/~newhall/unixhelp/C_arrays.html">Arrays in C</a></li>
</ul>
<p>Here is what I've done eventually:</p>
<div class="highlight"><pre><span></span><span class="n">people</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>

<span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">*</span><span class="p">(</span><span class="n">people</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>There is one thing to note about <tt class="docutils literal">calloc</tt>. It essentially the same as <tt class="docutils literal">malloc</tt> in terms of allocating a chunk of
array. However, unlike <tt class="docutils literal">malloc</tt>, <tt class="docutils literal">calloc</tt> will zero-initlize the chunk, which is quite useful when we work with
array of integers. In other words, <tt class="docutils literal">people = <span class="pre">malloc(N*sizeof(int));</span></tt> is perfectly fine in this case but <tt class="docutils literal">calloc</tt>
gives an advantage to have more control on array content, especially useful when we debug.</p>
</div>
<div class="section" id="circularly-linked-lists">
<h2>Circularly Linked Lists</h2>
<p>In MAW, author is kind of in-rush when talks about this section. When comes to implementation, how we deal with header node
need to carefully think through. This is what stated in the book:</p>
<blockquote>
A popular convention is to have the last cell keep a pointer back to the first. This can be done with or without
a header (if the header is present, the last cell points to it) and can also be done with doubly linked lists (the
first cell's previous pointer points to the last cell).</blockquote>
<p>Here is my circularly double linked list in picture:</p>
<img alt="" src="/images/circularly-double-linked-list-dummy.PNG" />
<p>In words, our dummy node's <tt class="docutils literal">Next</tt> points to the the first data node and <tt class="docutils literal">Prev</tt> points to the last data node.
With this setup, the head of the list can be accessed by <tt class="docutils literal">dummy.Next</tt> and tail by <tt class="docutils literal">dummy.Prev</tt>. In addition,
there will never be <tt class="docutils literal">NULL</tt> pointers in the data structure.</p>
<!-- http://www.cs.uwm.edu/~cs351/linked-list-variations.pdf -->
</div>
<div class="section" id="initialize-an-array-of-structs">
<h2>Initialize an array of structs</h2>
<p>When implement the radix sort solution, I need to construct an array of buckets,
with each bucket is a single linked list with a dummy node. Here is what I do:</p>
<div class="highlight"><pre><span></span><span class="k">static</span> <span class="n">List</span>
<span class="nf">makeEmptyArrayOfNodes</span><span class="p">(</span><span class="n">numBuckets</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Pos</span> <span class="n">Buckets</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">numBuckets</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>

  <span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">numBuckets</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">Buckets</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">Buckets</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>Here are two points worth noting:</p>
<ul>
<li><p class="first"><tt class="docutils literal">Pos</tt> is <tt class="docutils literal">struct Node*</tt> (can be checked by <tt class="docutils literal">ptype</tt> in GDB) when we allocate
an array of <tt class="docutils literal">struct Node</tt>.</p>
</li>
<li><p class="first">There is difference between <tt class="docutils literal"><span class="pre">-&gt;</span></tt> and <tt class="docutils literal">.</tt>. In K&amp;R Page 131, it says that:</p>
<blockquote>
<p>If <tt class="docutils literal">p</tt> is a <strong>POINTER</strong> to a structure, then <tt class="docutils literal"><span class="pre">p-&gt;member-of-structure</span></tt>
refers to the particular member.</p>
</blockquote>
<p>and <tt class="docutils literal">.</tt> is used to directly access a structure member.
In my case, since <tt class="docutils literal">Buckets[k]</tt> with type <tt class="docutils literal">struct Node</tt>, then I need to use <tt class="docutils literal">.</tt>.
However, if I want to use <tt class="docutils literal"><span class="pre">-&gt;</span></tt>, I need to use <tt class="docutils literal"><span class="pre">(&amp;Buckets[k])-&gt;Next</span></tt>.</p>
</li>
</ul>
<!-- http://stackoverflow.com/questions/4173518/c-initialize-array-of-structs -->
</div>
<div class="section" id="for-loop-instead-of-while">
<h2>For loop instead of while</h2>
<p>I try to experiment different trick when I work on my algo. Here is what I try: use <tt class="docutils literal">for</tt> loop instead
of <tt class="docutils literal">while</tt>:</p>
<div class="highlight"><pre><span></span><span class="n">deleteNode</span><span class="p">(</span><span class="n">ET</span> <span class="n">elem</span><span class="p">,</span> <span class="n">List</span> <span class="n">L</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Pos</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
  <span class="n">Pos</span> <span class="n">dummyPrev</span> <span class="o">=</span> <span class="n">L</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(;</span> <span class="n">dummyL</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="n">dummyPrev</span> <span class="o">=</span> <span class="n">dummyL</span><span class="p">,</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Element</span> <span class="o">==</span> <span class="n">elem</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">Pos</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">dummyL</span><span class="p">;</span>
      <span class="n">dummyPrev</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
      <span class="n">free</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<!-- https://www.cs.bu.edu/teaching/ -->
</div>
<div class="section" id="use-system-implementation-if-find-otherwise-use-my-own-version">
<h2>Use system implementation if find, otherwise use my own version</h2>
<p>I'm trying to use <tt class="docutils literal">fls</tt> inside <a class="reference external" href="https://github.com/xxks-kkk/algo/blob/77a66a5e911252a93e44bfb6d9bc4c62d85cdffc/linkedList/josephus/nonLinkedListSol.c">int cyclicShiftJosephus(int N, int M)</a>,
which return the last (most significant) bit set in value and return the index of that bit.
However, not all system has <tt class="docutils literal">fls</tt> shipped by default. So, I implement my own version. But, I would prefer
the program to use system version if it can find one. Otherwise, use mine.</p>
<p>One solution is to use <tt class="docutils literal">#ifndef</tt> with the structure looks like</p>
<div class="highlight"><pre><span></span><span class="cp">#ifndef fls</span>
<span class="kt">int</span> <span class="nf">fls</span><span class="p">(</span><span class="kt">int</span> <span class="n">mask</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="cp">#endi</span>
</pre></div>
<p>Another solution is to use <a class="reference external" href="https://en.wikipedia.org/wiki/Weak_symbol">weak symbol</a>. However, this solution may not be portable.
Then, it looks something like this</p>
<div class="highlight"><pre><span></span><span class="kt">int</span>  <span class="nf">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">))</span> <span class="n">fls</span><span class="p">(</span><span class="kt">int</span> <span class="n">mask</span><span class="p">){</span> <span class="p">..</span> <span class="p">}</span>
</pre></div>
<p>If system <tt class="docutils literal">fls</tt> is defined as strong, my <tt class="docutils literal">fls</tt> implementation will be overridden.</p>
</div>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

                    var disqus_identifier = 'josephus-problem-radix-sort-reflection';
                var disqus_url = '../../../../../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015-2017 Zeyuan Hu
           <!-- &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>-->         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="../../../../../theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../../../../theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37565522-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>