<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Reflection on integer arithmetic package problem - Zeyuan Hu's website</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="../../../../../posts/2016/Dec/26/reflection-on-integer-arithmetic-package-problem/">

        <meta name="author" content="Zeyuan Hu" />
        <meta name="keywords" content="software-engineering,c" />
        <meta name="description" content="This weekend, I&#39;m working on MAW 3.9. The single problem results in almost 500 lines of code. This is quite unexpected. The problem is stated as the following: Write an arbitrary-precision integer arithmetic package. You should use a strategy similar to polynomial arithmetic. Compute the distribution of the ..." />

        <meta property="og:site_name" content="Zeyuan Hu's website" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Reflection on integer arithmetic package problem"/>
        <meta property="og:url" content="../../../../../posts/2016/Dec/26/reflection-on-integer-arithmetic-package-problem/"/>
        <meta property="og:description" content="This weekend, I&#39;m working on MAW 3.9. The single problem results in almost 500 lines of code. This is quite unexpected. The problem is stated as the following: Write an arbitrary-precision integer arithmetic package. You should use a strategy similar to polynomial arithmetic. Compute the distribution of the ..."/>
        <meta property="article:published_time" content="2016-12-26" />
            <meta property="article:section" content="Data Struct & Algo" />
            <meta property="article:tag" content="software-engineering" />
            <meta property="article:tag" content="c" />
            <meta property="article:author" content="Zeyuan Hu" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../../../../theme/css/bootstrap.lumen.min.css" type="text/css"/>
    <link href="../../../../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../../../../theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../theme/css/style.css" type="text/css"/>

        <link href="../../../../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Zeyuan Hu's website ATOM Feed"/>

        <link href="../../../../../feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Zeyuan Hu's website RSS Feed"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <a href="../../../../../" class="navbar-brand">
Zeyuan Hu's website            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../../../about-zack.html"><i class="fa fa-question"></i><span class="icon-label">About</span></a></li>
              <li><a href="../../../../../archives/index.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../../../../../posts/2016/Dec/26/reflection-on-integer-arithmetic-package-problem/"
                       rel="bookmark"
                       title="Permalink to Reflection on integer arithmetic package problem">
                        Reflection on integer arithmetic package problem
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-12-26T23:03:00+08:00"> Mon 26 Dec 2016, 23:03</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="../../../../../tag/software-engineering.html">software-engineering</a>
        /
	<a href="../../../../../tag/c.html">c</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>This weekend, I'm working on MAW 3.9. The single problem results
in almost 500 lines of code. This is quite unexpected. The problem
is stated as the following:</p>
<blockquote>
Write an arbitrary-precision integer arithmetic package. You should
use a strategy similar to polynomial arithmetic. Compute the distribution
of the digits <span class="math">\(0\)</span> to <span class="math">\(9\)</span> in <span class="math">\(2^{4000}\)</span>.</blockquote>
<p>This post is the reflection about this problem.</p>
<div class="section" id="which-way-to-go">
<h2>Which way to go?</h2>
<p>Since the problem states &quot;arbitrary-precision&quot; and &quot;use a strategy similar to
polynomial arithmetic&quot;, then I can conclude that linked list is the best data
structure for this problem. However, the question is how we can construct the
linked list to best implement our integer arithmetic operations (i.e. addition,
mulitiplication)?</p>
<p>We essentially have two options:</p>
<ol class="arabic simple">
<li>We put the most significant digit as the the very first data node and
we put the least significant digit as the last data node. For example,
for a number <span class="math">\(123\)</span>, we will implement it like <tt class="docutils literal"><span class="pre">dummy-&gt;1-&gt;2-&gt;3</span></tt>.</li>
<li>This is the exactly opposite of the first option. We put the least significant
digit as the very first data node and we put the most significant digit as
the last data node. Again, for <span class="math">\(123\)</span>, we will implement is like
<tt class="docutils literal"><span class="pre">dummy-&gt;3-&gt;2-&gt;1</span></tt>.</li>
</ol>
<p>Let's evaluate these two options from two perspective:</p>
<ol class="arabic simple">
<li>Whether we can easily construct a linked list to represent arbitrary-precision integer?</li>
<li>Whether the arithmetic operations are essy to implement?</li>
</ol>
<p>From the first perspective, for option one, each time we add a new digit to the most significant position, we insert
a new node at the very beginning of the list (i.e. right after the header node).
On the other hand, for option two, we append a new node
at the very end of the list. Since we design our <tt class="docutils literal">addDigit</tt> with an input of a pointer to node (i.e. to specify
where to add node), these two options work equally well.</p>
<p>From the second perspective, things are different. Take arithmetic addition as an example. When we try to add
two numbers, for option one, we need to walk through the whole list to begin with the very end of the node
because we want to start with unit digit. This makes our routine complex because we need to use a while loop
to walk through the list first. For second option, situation is easier becauuse the number is implemented in the
reverse order in the list. The very first data node is the unit digit and we can directly start with addition
while we move towards the end of the list. If we need to add additional node because of carry (i.e. <span class="math">\(999 + 1\)</span>
will be no longer 3-digit but 4-digit number), we can naturally pass the pointer pointing towards the current node to
the <tt class="docutils literal">addDigit</tt> function.</p>
<p>So, we choose option two to implement our integer package.</p>
</div>
<div class="section" id="memory-leak">
<h2>Memory leak</h2>
<p>Memory leak is a very important issue to pay attention to during the testing phase. We use <a class="reference external" href="http://valgrind.org/">valgrind</a>
to help us detect if there is any leak in our code. You can reference <a class="reference external" href="http://valgrind.org/docs/manual/quick-start.html#quick-start.intro">their quick start guide</a>
and <a class="reference external" href="http://valgrind.org/docs/manual/mc-manual.html#mc-manual.errormsgs">memory check user manual</a> for the commands and error shooting.</p>
<p>Here are the two mistakes I made (You can check out <a class="reference external" href="https://github.com/xxks-kkk/algo/commit/299ebb9a90791612343f194d9eec1ed3909c97b3#diff-5db0d6074a742e1a08d3bb60c69e5a21">my commit about memory leak debug</a>):</p>
<ol class="arabic simple">
<li>Always <tt class="docutils literal">free</tt> the chunk allocated by <tt class="docutils literal">malloc</tt> whenever possible.</li>
</ol>
<p>Take <tt class="docutils literal">multiply</tt> function as an example:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">integerList</span>
 <span class="nf">multiply</span><span class="p">(</span><span class="n">integerList</span> <span class="n">A</span><span class="p">,</span> <span class="n">integerList</span> <span class="n">B</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">PtrToNode</span> <span class="n">dummyA</span> <span class="o">=</span> <span class="n">A</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
   <span class="n">PtrToNode</span> <span class="n">dummyB</span> <span class="o">=</span> <span class="n">B</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>

   <span class="n">integerList</span> <span class="n">tmpR</span> <span class="o">=</span> <span class="n">makeEmpty</span><span class="p">();</span>
   <span class="n">PtrToNode</span> <span class="n">dummyTmpR</span> <span class="o">=</span> <span class="n">tmpR</span><span class="p">;</span>

   <span class="n">integerList</span> <span class="n">R</span> <span class="o">=</span> <span class="n">makeEmpty</span><span class="p">();</span>

   <span class="kt">int</span> <span class="n">product</span><span class="p">,</span> <span class="n">carry</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyA</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="k">while</span> <span class="p">(</span><span class="n">dummyB</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
     <span class="p">{</span>
       <span class="n">product</span> <span class="o">=</span> <span class="n">dummyA</span><span class="o">-&gt;</span><span class="n">Digit</span> <span class="o">*</span> <span class="n">dummyB</span><span class="o">-&gt;</span><span class="n">Digit</span> <span class="o">+</span> <span class="n">carry</span><span class="p">;</span>
       <span class="n">carry</span> <span class="o">=</span> <span class="n">product</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
       <span class="n">addDigit</span><span class="p">(</span><span class="n">product</span> <span class="o">%</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dummyTmpR</span><span class="p">);</span>
       <span class="n">dummyTmpR</span> <span class="o">=</span> <span class="n">dummyTmpR</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
       <span class="n">dummyB</span> <span class="o">=</span> <span class="n">dummyB</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">if</span> <span class="p">(</span><span class="n">carry</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
     <span class="p">{</span>
       <span class="n">addDigit</span><span class="p">(</span><span class="n">carry</span><span class="p">,</span> <span class="n">dummyTmpR</span><span class="p">);</span>
       <span class="n">dummyTmpR</span> <span class="o">=</span> <span class="n">dummyTmpR</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">indent</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
     <span class="p">{</span>
       <span class="n">addDigit</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">tmpR</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="n">integerList</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">R</span><span class="p">;</span> <span class="c1">// prevent memory leak</span>
     <span class="n">R</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">tmpR</span><span class="p">);</span>
     <span class="n">deleteAll</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>

     <span class="n">indent</span> <span class="o">++</span><span class="p">;</span>
     <span class="n">carry</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
     <span class="n">deleteIntegerList</span><span class="p">(</span><span class="n">tmpR</span><span class="p">);</span>
     <span class="n">dummyTmpR</span> <span class="o">=</span> <span class="n">tmpR</span><span class="p">;</span>
     <span class="n">dummyA</span> <span class="o">=</span> <span class="n">dummyA</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
     <span class="n">dummyB</span> <span class="o">=</span> <span class="n">B</span><span class="o">-&gt;</span><span class="n">NextDigit</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="n">deleteAll</span><span class="p">(</span><span class="n">tmpR</span><span class="p">);</span>
   <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>We allocate <tt class="docutils literal">tmpR</tt> through <tt class="docutils literal">makeEmpty()</tt> in Line[7]. If we don't do anything about it
inside the function, then the memory will be lost because we have no way to reference this
chunk of memory outside the function. Local variable <tt class="docutils literal">tmpR</tt> is the only reference to the
memory allocated on the heap. However, once the function is done, the local variable is destroyed
from the stack, and thus, we lose our only reference to the memory chunk. So, we need to free it
before we exit the function (Line[49]).</p>
<ol class="arabic simple" start="2">
<li>Be careful with a function call inside a function call.</li>
</ol>
<p>This type of leak is much more subtle than the first one. Originally instead of</p>
<div class="highlight"><pre><span></span><span class="n">integerList</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">R</span><span class="p">;</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">tmpR</span><span class="p">);</span>
<span class="n">deleteAll</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
</pre></div>
<p>I only have <tt class="docutils literal">R = add(R, tmpR)</tt>. This cause the leak because of the following reasoning:
Originally, we have <tt class="docutils literal">R</tt> points to a list of nodes. When we do <tt class="docutils literal">add(R,tmpR)</tt>, we create
a new list of nodes, which hold our addition result. Then we let <tt class="docutils literal">R</tt> points towards this newly-created
list. This makes us lose the list of nodes originally pointed by <tt class="docutils literal">R</tt>. That's why we introduce <tt class="docutils literal">tmp</tt>.</p>
</div>
<div class="section" id="makeempty">
<h2>makeEmpty ?</h2>
<p>Originally, I don't have this <tt class="docutils literal">makeEmpty</tt> function:</p>
<div class="highlight"><pre><span></span><span class="n">integerList</span>
<span class="nf">makeEmpty</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">integerList</span> <span class="n">R</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>
  <span class="n">R</span><span class="o">-&gt;</span><span class="n">NextDigit</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// super important step</span>
  <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>If you take a look at this function, it seems to be a wrapper around <tt class="docutils literal">malloc</tt> operation, which
seems redundant (we could directly call <tt class="docutils literal">malloc</tt> directly in the place that <tt class="docutils literal">makeEmpty</tt> appears).
However, the key for this routine is <tt class="docutils literal"><span class="pre">R-&gt;NextDigit</span> = NULL;</tt>. This step can be easily omitted. However,
without this step, we don't have fully control on what our newly-allocated empty list (i.e. a list with only
header node) will look like. In other words, our header node will point to somewhere (i.e. <tt class="docutils literal"><span class="pre">R-&gt;NextDigit</span></tt>) randomly without
our key step. This can cause serious trouble for the following routine debug. For example, we could have <tt class="docutils literal"><span class="pre">R-&gt;NextDigit</span></tt>
holds some address value that happens to have a node structure there with a value in it. For instance, <tt class="docutils literal"><span class="pre">dummy-&gt;1</span></tt>.
This can usually happen when you OS try to reuse the memory chunk you previously freed. For example, try the following experiment:</p>
<ol class="arabic simple">
<li>replace <tt class="docutils literal">makeEmpty</tt> on Line[7] &amp; line[10] in <tt class="docutils literal">multiply</tt> function</li>
<li><tt class="docutils literal">multiply</tt> works fine with <tt class="docutils literal">test_multiply()</tt> solely in the test program.</li>
<li><tt class="docutils literal">multiply</tt> won't work if we do <tt class="docutils literal">test_intializeInteger()</tt> and <tt class="docutils literal">test_add()</tt> before <tt class="docutils literal">test_multiply()</tt>
because the integer we construct will no longer be <tt class="docutils literal">342</tt> in the test case but something like <tt class="docutils literal">3425</tt>, where
<tt class="docutils literal">5</tt> is some value pointed by <tt class="docutils literal"><span class="pre">R-&gt;NextDigit</span></tt>.</li>
</ol>
<p>So, always clear out the pointer by setting it to <tt class="docutils literal">NULL</tt> whenever we do initialization.</p>
</div>
<script type='text/javascript'>if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' }, Macros: {} }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

                    var disqus_identifier = 'reflection-on-integer-arithmetic-package-problem';
                var disqus_url = '../../../../../posts/2016/Dec/26/reflection-on-integer-arithmetic-package-problem/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015-2017 Zeyuan Hu
           <!-- &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>-->         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="../../../../../theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../../../../theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37565522-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>