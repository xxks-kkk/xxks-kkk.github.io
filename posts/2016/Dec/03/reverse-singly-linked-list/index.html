<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Reverse Singly Linked List - Zeyuan Hu's website</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="../../../../../posts/2016/Dec/03/reverse-singly-linked-list/">

        <meta name="author" content="Zeyuan Hu" />
        <meta name="keywords" content="singly-linked-list,recursion,maw" />
        <meta name="description" content="Problem This problem is MAW 3.12: Write a nonrecursive procedure to reverse a singly linked list in O(N) time. Write a procedure to reverse a singly linked list in O(N) time using constant extra space. Solution Essentially, this is just one problem: reverse a singly linked list ..." />

        <meta property="og:site_name" content="Zeyuan Hu's website" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Reverse Singly Linked List"/>
        <meta property="og:url" content="../../../../../posts/2016/Dec/03/reverse-singly-linked-list/"/>
        <meta property="og:description" content="Problem This problem is MAW 3.12: Write a nonrecursive procedure to reverse a singly linked list in O(N) time. Write a procedure to reverse a singly linked list in O(N) time using constant extra space. Solution Essentially, this is just one problem: reverse a singly linked list ..."/>
        <meta property="article:published_time" content="2016-12-03" />
            <meta property="article:section" content="Data Struct & Algo" />
            <meta property="article:tag" content="singly-linked-list" />
            <meta property="article:tag" content="recursion" />
            <meta property="article:tag" content="maw" />
            <meta property="article:author" content="Zeyuan Hu" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../../../../theme/css/bootstrap.lumen.min.css" type="text/css"/>
    <link href="../../../../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../../../../theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../theme/css/style.css" type="text/css"/>

        <link href="../../../../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Zeyuan Hu's website ATOM Feed"/>

        <link href="../../../../../feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Zeyuan Hu's website RSS Feed"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <a href="../../../../../" class="navbar-brand">
Zeyuan Hu's website            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../../../about-zack.html"><i class="fa fa-question"></i><span class="icon-label">About</span></a></li>
              <li><a href="../../../../../archives/index.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../../../../../posts/2016/Dec/03/reverse-singly-linked-list/"
                       rel="bookmark"
                       title="Permalink to Reverse Singly Linked List">
                        Reverse Singly Linked List
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-12-03T20:34:00+08:00"> Sat 03 Dec 2016, 20:34</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="../../../../../tag/singly-linked-list.html">singly-linked-list</a>
        /
	<a href="../../../../../tag/recursion.html">recursion</a>
        /
	<a href="../../../../../tag/maw.html">maw</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <div class="section" id="problem">
<h2>Problem</h2>
<p>This problem is MAW 3.12:</p>
<blockquote>
<ol class="loweralpha simple">
<li>Write a nonrecursive procedure to reverse a singly linked list in O(N) time.</li>
<li>Write a procedure to reverse a singly linked list in O(N) time using constant
extra space.</li>
</ol>
</blockquote>
</div>
<div class="section" id="solution">
<h2>Solution</h2>
<p>Essentially, this is just one problem: reverse a singly linked list with various
constraints. There are a couple of ways doing so. All of them satisfy 3.12.a and
3.12.b</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Solution 2 &amp; 3 are probably most people will expect, particularly during an
interview.</p>
</div>
<div class="section" id="solution-1">
<h3>Solution 1</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">List</span>
 <span class="nf">reverseList</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="n">List</span> <span class="n">R</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyL</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">Pos</span> <span class="n">tmpNode</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Element</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Element</span><span class="p">;</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">tmpNode</span><span class="p">;</span>
     <span class="n">dummyL</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>Solution 1 is pretty straightforward. We first create a new list. Then, we walk
through the original list and insert node we visit at the very beginning of the
new list. Once we finish the traversal of the original list, we return the new list.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use a stack to reverse the list. This will require O(N) extra space.</p>
</div>
<p>This solution shows one of the reasons why we use a <em>header</em> node or <em>dummy</em> node
in our linked list implementation (instead of just use a pointer directly pointing
towards the first element in the list):</p>
<blockquote>
Without the dummy node, there is no really obvious way to insert at the
front of the list.</blockquote>
<p>This can be seen from Line[12]. Also, this routine has a return type <tt class="docutils literal">List</tt> instead of
<tt class="docutils literal">void</tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The definition for using or not using <em>dummy</em> node is the same. However,
implementation difference can be seen by observing how the program construct
a list: in my case, <a class="reference external" href="../../../../../posts/2016/Nov/28/printlots/">initializeList</a>.</p>
</div>
<p>However, this solution wastes a ton of memory space and too many <tt class="docutils literal">malloc</tt> operations,
which basically duplicate the data. This is the place where the algorithm can be improved.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">List</span>
 <span class="nf">reverseList</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="n">List</span> <span class="n">R</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyL</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="c1">// Remove element from old list.</span>
     <span class="n">Pos</span> <span class="n">tmpNode</span> <span class="o">=</span> <span class="n">dummyL</span><span class="p">;</span>
     <span class="n">dummyL</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>

     <span class="c1">// Insert element in new list.</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">tmpNode</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This solution has two interesting points:</p>
<ul class="last simple">
<li>It's obvious that it's correct: there are no corner cases to worry about
and both two-line operations are familiar to anyone who's manipulated a
linked list.</li>
<li>It's pretty much identical to the Solution 2 (same number of temporary variables,
same assignments in slightly different order).</li>
</ul>
</div>
</div>
<div class="section" id="solution-2">
<h3>Solution 2</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="kt">void</span>
 <span class="nf">reverseListIterative</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyCurrent</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">,</span>
       <span class="n">dummyPrev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span>
       <span class="n">dummyNext</span><span class="p">;</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyCurrent</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">dummyNext</span> <span class="o">=</span> <span class="n">dummyCurrent</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">dummyCurrent</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">dummyPrev</span><span class="p">;</span>
     <span class="n">dummyPrev</span> <span class="o">=</span> <span class="n">dummyCurrent</span><span class="p">;</span>
     <span class="n">dummyCurrent</span> <span class="o">=</span> <span class="n">dummyNext</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">dummyPrev</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>The 2nd solution is an iterative approach. The logic itself is quite straightforward.
But, please always remember we assume <em>dummy</em> node exists. You can see both from
Line[4] and Line[15].</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This actually not the solution I come up initially. My initial implementation
works but is not as nice as this one. You can check it out in my
<a class="reference external" href="https://github.com/xxks-kkk/algo/blob/master/linkedList/linkedList.c">linkedList.c</a></p>
</div>
</div>
<div class="section" id="solution-3">
<h3>Solution 3</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">static</span> <span class="n">List</span> <span class="n">P</span><span class="p">;</span>
 <span class="k">static</span> <span class="kt">void</span>
 <span class="nf">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">P</span> <span class="o">=</span> <span class="n">L</span><span class="p">;</span>
     <span class="k">return</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">L</span><span class="p">;</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="kt">void</span>
 <span class="nf">reverseListRecursive</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">P</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>This solution is a recursive solution. This causes me much time to think about
because we have a <em>dummy</em> node to be taken care of. That's why I use a private
helper function. There is a couple important points to be noticed here:</p>
<ul>
<li><p class="first">Use a static List variable <tt class="docutils literal">P</tt> is necessary because we need to keep track of
where is our first node after reverse (i.e. the last node in the original list
will become the first node after reversal). This is important because without
<tt class="docutils literal">P</tt>, we cannot access the first node because all the links are reversed and
we can no longer traverse the list from our <em>dummy</em> node.</p>
</li>
<li><p class="first">Inside <tt class="docutils literal">reverseListRecursiveHelper</tt>, I don't have to check if <tt class="docutils literal">L</tt> is <tt class="docutils literal">NULL</tt>
(You need to do this for no <em>dummy</em> node implementation style). Essentially, this
is the base case where I got passed in an empty list. Since in our implementation,
<em>dummy</em> node always exists even when the list is empty (check out <tt class="docutils literal">deleteList</tt> routine),
<tt class="docutils literal"><span class="pre">L-&gt;Next</span></tt> is always valid (we don't want to reference <tt class="docutils literal">L</tt>, which is <tt class="docutils literal">NULL</tt> already).</p>
</li>
<li><p class="first">We use a private function mainly because we have <em>dummy</em> node in our implementation.
This is a special case that cannot be handled inside the recusive call. That's
also why the first data node in the original list is passed into the helper function.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">List</span> <span class="n">P</span><span class="p">;</span>
<span class="kt">void</span>
<span class="nf">reverseListRecursive</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// empty list base case</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// only one node (tail node) base case</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">reverseListRecursive</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">P</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>The above code shows a perfect example why <em>dummy</em> node case cannot be handled
in recursive call. This is because, when we do recursion, we always assume
there is <em>dummy</em> node exists in the sub list we passed in. However, that is not
what our list acutally is. You can see why our recursion assumes the <em>dummy</em> node exists by
reading Line[6] &amp; Line[11] &amp; Line[16].</p>
</li>
</ul>
</div>
</div>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

                    var disqus_identifier = 'reverse-singly-linked-list';
                var disqus_url = '../../../../../posts/2016/Dec/03/reverse-singly-linked-list/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015-2017 Zeyuan Hu
           <!-- &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>-->         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="../../../../../theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../../../../theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37565522-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>