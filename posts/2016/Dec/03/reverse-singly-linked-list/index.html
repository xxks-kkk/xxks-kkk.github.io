<!DOCTYPE html>
<html lang="en">
<head>
        <title>Reverse Singly Linked List</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../../../../../theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="../../../../../theme/css/font-awesome.min.css" type="text/css" />
        <link href='../../../../../theme/images/favicon.ico' rel='icon' type='image/x-icon'/>
        <link href="../../../../../None" type="application/atom+xml" rel="alternate" title="Tech Stuff ATOM Feed" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../../css/ie.css"/>
                <script src="../../../../../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
          <!-- <h1><a href="../../../../../index.html"><img src="../../../../../theme/images/logo2.png" alt="Tech Stuff" /><br /><strong>A tmp place to rest</strong></a></h1> -->
          <!-- <h1><a href="../../../../../index.html">Tech Stuff<br /><strong>A tmp place to rest</strong></a></h1> -->
                <nav><ul>
                    <li ><a href="../../../../../about-zeyuan.html">About Zeyuan</a></li>
                    <li ><a href="../../../../../projects.html">Projects</a></li>
                    <li ><a href="../../../../../quotes.html">Quotes</a></li>
                <li><a href="../../../../..">Blog</a></li>
                <li><a href="../../../../../archives/index.html">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->

<section id="content" class="body">
<article>
      <header> <h1 class="entry-title"><a href="../../../../../posts/2016/Dec/03/reverse-singly-linked-list/"
        rel="bookmark" title="Permalink to Reverse Singly Linked List">Reverse Singly Linked List</a></h1>  </header>
        <div class="entry-content">
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2016-12-03T20:34:00+08:00">Sat 03 Dec 2016, 20:34</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../../../../../category/data-struct-and-algo-analysis-in-c.html">Data Struct and Algo Analysis in C</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../../../../../tag/c.html">c</a> <a href="../../../../../tag/singly-linked-list.html">singly-linked-list</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
        <div class="section" id="problem">
<h2>Problem</h2>
<p>This problem is MAW 3.12:</p>
<blockquote>
<ol class="loweralpha simple">
<li>Write a nonrecursive procedure to reverse a singly linked list in O(N) time.</li>
<li>Write a procedure to reverse a singly linked list in O(N) time using constant
extra space.</li>
</ol>
</blockquote>
</div>
<div class="section" id="solution">
<h2>Solution</h2>
<p>Essentially, this is just one problem: reverse a singly linked list with various
constraints. There are a couple of ways doing so. All of them satisfy 3.12.a and
3.12.b</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Solution 2 &amp; 3 are probably most people will expect, particularly during an
interview.</p>
</div>
<div class="section" id="solution-1">
<h3>Solution 1</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">List</span>
 <span class="nf">reverseList</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="n">List</span> <span class="n">R</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyL</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">Pos</span> <span class="n">tmpNode</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Element</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Element</span><span class="p">;</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">tmpNode</span><span class="p">;</span>
     <span class="n">dummyL</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>Solution 1 is pretty straightforward. We first create a new list. Then, we walk
through the original list and insert node we visit at the very beginning of the
new list. Once we finish the traversal of the original list, we return the new list.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">You can use a stack to reverse the list. This will require O(N) extra space.</p>
</div>
<p>This solution shows one of the reasons why we use a <em>header</em> node or <em>dummy</em> node
in our linked list implementation (instead of just use a pointer directly pointing
towards the first element in the list):</p>
<blockquote>
Without the dummy node, there is no really obvious way to insert at the
front of the list.</blockquote>
<p>This can be seen from Line[12]. Also, this routine has a return type <tt class="docutils literal">List</tt> instead of
<tt class="docutils literal">void</tt>.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">The definition for using or not using <em>dummy</em> node is the same. However,
implementation difference can be seen by observing how the program construct
a list: in my case, <a class="reference external" href="../../../../../posts/2016/Nov/28/printlots/">initializeList</a>.</p>
</div>
<p>However, this solution wastes a ton of memory space and too many <tt class="docutils literal">malloc</tt> operations,
which basically duplicate the data. This is the place where the algorithm can be improved.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">List</span>
 <span class="nf">reverseList</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyL</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
   <span class="n">List</span> <span class="n">R</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">Node</span><span class="p">));</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyL</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="c1">// Remove element from old list.</span>
     <span class="n">Pos</span> <span class="n">tmpNode</span> <span class="o">=</span> <span class="n">dummyL</span><span class="p">;</span>
     <span class="n">dummyL</span> <span class="o">=</span> <span class="n">dummyL</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>

     <span class="c1">// Insert element in new list.</span>
     <span class="n">tmpNode</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">R</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">tmpNode</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">R</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><div class="note">
<p class="first admonition-title">Note</p>
<p>This solution has two interesting points:</p>
<ul class="last simple">
<li>It's obvious that it's correct: there are no corner cases to worry about
and both two-line operations are familiar to anyone who's manipulated a
linked list.</li>
<li>It's pretty much identical to the Solution 2 (same number of temporary variables,
same assignments in slightly different order).</li>
</ul>
</div>
</div>
<div class="section" id="solution-2">
<h3>Solution 2</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="kt">void</span>
 <span class="nf">reverseListIterative</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">Pos</span> <span class="n">dummyCurrent</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">,</span>
       <span class="n">dummyPrev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span>
       <span class="n">dummyNext</span><span class="p">;</span>

   <span class="k">while</span> <span class="p">(</span><span class="n">dummyCurrent</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">dummyNext</span> <span class="o">=</span> <span class="n">dummyCurrent</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
     <span class="n">dummyCurrent</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">dummyPrev</span><span class="p">;</span>
     <span class="n">dummyPrev</span> <span class="o">=</span> <span class="n">dummyCurrent</span><span class="p">;</span>
     <span class="n">dummyCurrent</span> <span class="o">=</span> <span class="n">dummyNext</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">dummyPrev</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>The 2nd solution is an iterative approach. The logic itself is quite straightforward.
But, please always remember we assume <em>dummy</em> node exists. You can see both from
Line[4] and Line[15].</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">This actually not the solution I come up initially. My initial implementation
works but is not as nice as this one. You can check it out in my
<a class="reference external" href="https://github.com/xxks-kkk/algo/blob/master/linkedList/linkedList.c">linkedList.c</a></p>
</div>
</div>
<div class="section" id="solution-3">
<h3>Solution 3</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">static</span> <span class="n">List</span> <span class="n">P</span><span class="p">;</span>
 <span class="k">static</span> <span class="kt">void</span>
 <span class="nf">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">P</span> <span class="o">=</span> <span class="n">L</span><span class="p">;</span>
     <span class="k">return</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">L</span><span class="p">;</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="kt">void</span>
 <span class="nf">reverseListRecursive</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="n">reverseListRecursiveHelper</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
   <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">P</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>This solution is a recursive solution. This causes me much time to think about
because we have a <em>dummy</em> node to be taken care of. That's why I use a private
helper function. There is a couple important points to be noticed here:</p>
<ul>
<li><p class="first">Use a static List variable <tt class="docutils literal">P</tt> is necessary because we need to keep track of
where is our first node after reverse (i.e. the last node in the original list
will become the first node after reversal). This is important because without
<tt class="docutils literal">P</tt>, we cannot access the first node because all the links are reversed and
we can no longer traverse the list from our <em>dummy</em> node.</p>
</li>
<li><p class="first">Inside <tt class="docutils literal">reverseListRecursiveHelper</tt>, I don't have to check if <tt class="docutils literal">L</tt> is <tt class="docutils literal">NULL</tt>
(You need to do this for no <em>dummy</em> node implementation style). Essentially, this
is the base case where I got passed in an empty list. Since in our implementation,
<em>dummy</em> node always exists even when the list is empty (check out <tt class="docutils literal">deleteList</tt> routine),
<tt class="docutils literal"><span class="pre">L-&gt;Next</span></tt> is always valid (we don't want to reference <tt class="docutils literal">L</tt>, which is <tt class="docutils literal">NULL</tt> already).</p>
</li>
<li><p class="first">We use a private function mainly because we have <em>dummy</em> node in our implementation.
This is a special case that cannot be handled inside the recusive call. That's
also why the first data node in the original list is passed into the helper function.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">List</span> <span class="n">P</span><span class="p">;</span>
<span class="kt">void</span>
<span class="nf">reverseListRecursive</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// empty list base case</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// only one node (tail node) base case</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">reverseListRecursive</span><span class="p">(</span><span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">);</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span> <span class="o">=</span> <span class="n">P</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table><p>The above code shows a perfect example why <em>dummy</em> node case cannot be handled
in recursive call. This is because, when we do recursion, we always assume
there is <em>dummy</em> node exists in the sub list we passed in. However, that is not
what our list acutally is. You can see why our recursion assumes the <em>dummy</em> node exists by
reading Line[6] &amp; Line[11] &amp; Line[16].</p>
</li>
</ul>
</div>
</div>

        </div><!-- /.entry-content -->
        <div class="comments">
        <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
               var disqus_identifier = "posts/2016/Dec/03/reverse-singly-linked-list/";
               (function() {
               var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
               dsq.src = 'https://zhu45-org.disqus.com/embed.js';
               (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
        </div>

</article>
</section>

        <aside id="sidebar">
          <!-- <div class="widget" id="book" role="book">
<h2><i class="fa fa-book fa-lg"></i> MySQL 5.1 Plugins Development</h2>
<a href="https://www.packtpub.com/mysql-5-1-plugins-development/book"><img border="0" style="float:left" src="../../../../../theme/images/0608OS_MockupCover_sm.png" />
MySQL 5.1 Plugins Development by Andrew Hutchings and Sergei Golubchik is now available from Packt Publishing.</a>
<br style="clear:left;" />
</div> -->
<!--          <h2><i class="fa fa-twitter fa-lg"></i> Twitter Feed</h2>
<a class="twitter-timeline" data-width="280" data-height="300" href="https://twitter.com/zeyuanhu">Tweets by zeyuanhu</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>-->
                <div class="widget">
                        <h2><i class="fa fa-home fa-lg"></i> Categories</h2>
                        <ul>
                           <li class="active"><a href="../../../../../category/data-struct-and-algo-analysis-in-c.html"><i class="fa fa-folder-open fa-lg"></i> Data Struct and Algo Analysis in C (4)</a></li>
                           <li ><a href="../../../../../category/misc.html"><i class="fa fa-folder-open fa-lg"></i> misc (2)</a></li>
                           <li ><a href="../../../../../category/tools.html"><i class="fa fa-folder-open fa-lg"></i> tools (5)</a></li>
                        </ul>
                </div>
                <div class="widget social">
                        <h2><i class="fa fa-comments fa-lg"></i> Social</h2>
                        <ul>
                            <!-- <li><a href="../../../../../None" rel="alternate"><i class="fa fa-rss-square fa-lg"></i> RSS feed</a></li> -->
                            <!--  -->

                            <li><a href="http://github.com/xxks-kkk"><i class="fa fa-github fa-lg"></i> GitHub</a></li>
                            <li><a href="http://stackoverflow.com/users/1460102/jerry"><i class="fa fa-stack-overflow fa-lg"></i> Stack Overflow</a></li>
                            <li><a href="http://zeyuanhu.wordpress.com/"><i class="fa fa-wordpress fa-lg"></i> WordPress</a></li>
                            <li><a href="https://cn.linkedin.com/in/zhu45"><i class="fa fa-linkedin fa-lg"></i> LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
            <div class="widget tags">
            <h2><i class="fa fa-tags fa-lg"></i>Tags</h2>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/aix.html">
                            AIX
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="../../../../../tag/c.html">
                            c
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/emacs.html">
                            emacs
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/github.html">
                            github
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/jinja.html">
                            Jinja
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/meta.html">
                            meta
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/sed.html">
                            sed
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="../../../../../tag/shell.html">
                            shell
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="../../../../../tag/singly-linked-list.html">
                            singly-linked-list
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/software-engineering.html">
                            software engineering
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/travis-ci.html">
                            travis-ci
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../../../../../tag/tutorial.html">
                            tutorial
                        </a>
                    </li>
                </ul>
            </div>
        </aside><!-- /#sidebar -->

        <!-- <footer id="footer" class="body"> -->
        <!--         <address id="about" class="vcard body"> -->
        <!--         Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>. -->
        <!--         </address><\!-- /#about -\-> -->
        <!--         <p>The LinuxJedi logo and the content of this blog is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p> -->
        <!-- </footer><\!-- /#footer -\-> -->

</body>
</html>