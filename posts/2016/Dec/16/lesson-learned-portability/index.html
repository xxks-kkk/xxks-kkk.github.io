<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Lesson Learned: Portability - Zeyuan Hu's website</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="../../../../../posts/2016/Dec/16/lesson-learned-portability/">

        <meta name="author" content="Zeyuan Hu" />
        <meta name="keywords" content="software-engineering,shell,AIX" />
        <meta name="description" content="Portability is a kind of issue that people always talk about in software engineering field. I never have been through such problem on my own probably because I don&#39;t have to port my stuff into different platforms. However, this is not the case anymore during the work. Recently, I ..." />

        <meta property="og:site_name" content="Zeyuan Hu's website" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Lesson Learned: Portability"/>
        <meta property="og:url" content="../../../../../posts/2016/Dec/16/lesson-learned-portability/"/>
        <meta property="og:description" content="Portability is a kind of issue that people always talk about in software engineering field. I never have been through such problem on my own probably because I don&#39;t have to port my stuff into different platforms. However, this is not the case anymore during the work. Recently, I ..."/>
        <meta property="article:published_time" content="2016-12-16" />
            <meta property="article:section" content="misc" />
            <meta property="article:tag" content="software-engineering" />
            <meta property="article:tag" content="shell" />
            <meta property="article:tag" content="AIX" />
            <meta property="article:author" content="Zeyuan Hu" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../../../../theme/css/bootstrap.lumen.min.css" type="text/css"/>
    <link href="../../../../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../../../../theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../theme/css/style.css" type="text/css"/>

        <link href="../../../../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Zeyuan Hu's website ATOM Feed"/>

        <link href="../../../../../feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Zeyuan Hu's website RSS Feed"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <a href="../../../../../" class="navbar-brand">
Zeyuan Hu's website            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../../../about-zack.html"><i class="fa fa-question"></i><span class="icon-label">About</span></a></li>
              <li><a href="../../../../../archives/index.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../../../../../posts/2016/Dec/16/lesson-learned-portability/"
                       rel="bookmark"
                       title="Permalink to Lesson Learned: Portability">
                        Lesson Learned: Portability
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-12-16T23:20:00+08:00"> Fri 16 Dec 2016, 23:20</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="../../../../../tag/software-engineering.html">software-engineering</a>
        /
	<a href="../../../../../tag/shell.html">shell</a>
        /
	<a href="../../../../../tag/aix.html">AIX</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Portability is a kind of issue that people always talk about in software engineering field.
I never have been through such problem on my own probably because I don't have to port my
stuff into different platforms. However, this is not the case anymore during the work.</p>
<p>Recently, I revisit the first task I owned when I joined the team, which is to develop a lightweight
configuration tool to improve product usability. Lightweight is the key of this task as we originally
have a Java-based GUI setup tool involving lots of point &amp; click. This solution is fairly unpopular among
our customers mainly because the program itself takes lots of space for DB2 image and it doesn't fit well
with his peers, which all are scripts that can be executed directly from shell.</p>
<p>So, in my iteration, I decide to follow the format of majority of utility tools in DB2 image - using scripting language.
The language I choose is, unfortunately, Shell. The whole task goes amazingly well. With the help of my tool, product configuration
time is reduced by 75%. Everyone in my team loves it until someone decides to run it on AIX.</p>
<p>The environment I develop the tool is SUSE with <tt class="docutils literal">ksh</tt> installed. The AIX that my colleague tries to test my tool on also has <tt class="docutils literal">ksh</tt> configured
but there are some quirky behavior difference on different platform.</p>
<p>For instance, when I try to split an array, say <tt class="docutils literal">tmp2</tt> with delimiter <tt class="docutils literal">:</tt>, the following code works great on SUSE:</p>
<pre class="literal-block">
saveIFS=$IFS
IFS=&quot;:&quot;
local tmp2=($tmp) # split tmp with &quot;:&quot; and stored into tmp2 as array
IFS=$saveIFS
</pre>
<p>However, on AIX, only the following way will work:</p>
<pre class="literal-block">
#!/bin/sh
tmp=a:b:c:d
saveIFS=$IFS
IFS=&quot;:&quot;
local tmp2
n=0
for i in $tmp; do tmp2[$n]=$i; ((n=n+1)); done
IFS=$saveIFS
echo ${tmp2[0]}
echo ${tmp2[1]}
echo ${tmp2[2]}
echo ${tmp2[3]}
</pre>
<p>As you can see, I need a for loop to split the array on AIX.</p>
<p>For another example, when I try to increment counter inside a loop, on SUSE,
I can do <tt class="docutils literal"><span class="pre">((n++))</span></tt> but on AIX, I need to do <tt class="docutils literal">((n=n+1))</tt>.</p>
<p>This makes me realize why most of our development scripts (i.e. to help build the source code)
use perl instead of shell. I have to rewrite the whole script in Perl.</p>
<p>This is a very important lesson for a fresh college graduate by that time.</p>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

                    var disqus_identifier = 'lesson-learned-portability';
                var disqus_url = '../../../../../posts/2016/Dec/16/lesson-learned-portability/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015-2017 Zeyuan Hu
           <!-- &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>-->         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="../../../../../theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../../../../theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhu45-org'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37565522-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>