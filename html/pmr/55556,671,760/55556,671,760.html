<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>55556,671,760 &mdash; Zeyuan&#39;s IBM Docs</title>
    
    <link rel="stylesheet" href="../../_static/traditional.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Zeyuan&#39;s IBM Docs" href="../../index.html" />
    <link rel="up" title="PMR" href="../pmr.html" />
    <link rel="next" title="Major Achievement @ IBM" href="../../major_achievement.html" />
    <link rel="prev" title="32382,122,000" href="../32382,122,000/32382,122,000.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../major_achievement.html" title="Major Achievement @ IBM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../32382,122,000/32382,122,000.html" title="32382,122,000"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Zeyuan&#39;s IBM Docs</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../pmr.html" accesskey="U">PMR</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="rst">
<span id="id1"></span><h1>55556,671,760<a class="headerlink" href="#rst" title="Permalink to this headline">¶</a></h1>
<div class="section" id="link">
<h2>Link<a class="headerlink" href="#link" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://servrtc.canlab.ibm.com:10100/ccm/web/projects/ServDB#action=com.ibm.team.workitem.viewWorkItem&amp;id=5783">https://servrtc.canlab.ibm.com:10100/ccm/web/projects/ServDB#action=com.ibm.team.workitem.viewWorkItem&amp;id=5783</a></p>
</div>
<div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>Customer observes memory leak in db2fmp</p>
</div>
<div class="section" id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>AIX 64 with db2 &#8220;DB2 v9.7.0.10&#8221;, &#8220;special_34063&#8221;</p>
</div>
<div class="section" id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="problem-reproduction">
<h2>Problem reproduction<a class="headerlink" href="#problem-reproduction" title="Permalink to this headline">¶</a></h2>
<p>Accesses to Oracle 11.2 via the federation server</p>
</div>
<div class="section" id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<p>Customer reports that the following passthrough feature cause the memory leak in db2fmp:</p>
<div class="highlight-python"><div class="highlight"><pre>db2 set passthru ${server}
if [[ $? != 0 ]] ; then
        msg_out IF1005 ${server}への接続 1
        continue
fi

for table in ${TABLE_LIST2}
do
        TBSPACE=`db2 -x &quot;SELECT TABLESPACE_NAME FROM USER_TABLES WHERE
        TABLE_NAME=&#39;&quot;${table}&quot;&#39;&quot;`
        INDEX_LIST=`db2 -x &quot;SELECT INDEX_NAME FROM USER_INDEXES WHERE
        INDEX_TYPE=&#39;NORMAL&#39; AND TABLE_NAME=&#39;&quot;${table}&quot;&#39;&quot;`
        echo &quot;FEDERATED TABLE: $server.$table&quot; 2&gt;&amp;1
        db2 &quot;ALTER TABLE ${table} MOVE TABLESPACE ${TBSPACE}&quot; 2&gt;&amp;1
        ((rc=rc+$?))

        for index in $INDEX_LIST
        do
                echo &quot;FEDERATED INDEX: $server.$table $index&quot; 2&gt;&amp;1
                db2 &quot;ALTER INDEX ${index} REBUILD&quot; 2&gt;&amp;1
                ((rc=rc+$?))
        done

done

db2 set passthru reset
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple">
<li><code class="docutils literal"><span class="pre">-x</span></code> option tells the command line processor to return data without any headers, including
column names. This flag will not affect all commands. It applies to SQL statemnts and some
commands that are based on SQL statements such as <code class="docutils literal"><span class="pre">LIST</span> <span class="pre">TABLES</span></code></li>
<li><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">...</span> <span class="pre">MOVE</span> <span class="pre">TABLESPACE</span></code> move table to another tablespace (Oracle)</li>
<li><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">INDEX</span> <span class="pre">...</span> <span class="pre">REBUILD</span></code> rebuild an index (Oracle)</li>
</ol>
</div>
</div>
<div class="section" id="fix-tests">
<h2>Fix &amp; Tests<a class="headerlink" href="#fix-tests" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="remarks">
<h2>Remarks<a class="headerlink" href="#remarks" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">55556,671,760</a><ul>
<li><a class="reference internal" href="#link">Link</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#environment">Environment</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#problem-reproduction">Problem reproduction</a></li>
<li><a class="reference internal" href="#analysis">Analysis</a></li>
<li><a class="reference internal" href="#fix-tests">Fix &amp; Tests</a></li>
<li><a class="reference internal" href="#remarks">Remarks</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../32382,122,000/32382,122,000.html"
                        title="previous chapter">32382,122,000</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../major_achievement.html"
                        title="next chapter">Major Achievement &#64; IBM</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../major_achievement.html" title="Major Achievement @ IBM"
             >next</a> |</li>
        <li class="right" >
          <a href="../32382,122,000/32382,122,000.html" title="32382,122,000"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Zeyuan&#39;s IBM Docs</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../pmr.html" >PMR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015-2016, Zeyuan Hu.
      Last updated on Feb 03, 2016.
    </div>
  </body>
</html>