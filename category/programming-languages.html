<!DOCTYPE html>
<html lang="en">
  <head>
        <title>Tech Stuff - programming languages</title>
        <meta charset="utf-8" />
        <meta content="This is the homepage of Zeyuan (Jerry) Hu" name="description">
        <meta content="Zeyuan Hu, Zeyuan, Jerry Hu, Jerry, zeyuan hu, zeyuan ibm, IBM, Zeyuan IBM, UW Madison, University of Wisconsin Madison, Zeyuan wisc, zeyuan wisc, zeyuan IBM, zeyuan federation" name="keywords">
        <meta content="Zeyuan Hu" name="author">
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="../theme/css/font-awesome.min.css" type="text/css" />
        <link href='../theme/images/favicon.ico' rel='icon' type='image/x-icon'/>
        <link href="../None" type="application/atom+xml" rel="alternate" title="Tech Stuff ATOM Feed" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
          <!-- <h1><a href="../index.html"><img src="../theme/images/logo2.png" alt="Tech Stuff" /><br /><strong>A tmp place to rest</strong></a></h1> -->
          <!-- <h1><a href="../index.html">Tech Stuff<br /><strong>A tmp place to rest</strong></a></h1> -->
                <nav><ul>
                    <li ><a href="../about-zack.html">About Zack</a></li>
                    <li ><a href="../projects.html">Projects</a></li>
                    <li ><a href="../quotes.html">Quotes</a></li>
                <li><a href="..">Blog</a></li>
                <li><a href="../archives/index.html">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->


     <section id="content" class="body">
        <aside id="featured"><article>
                <h1 class="entry-title"><a href="../posts/2017/Jan/19/typecasting-in-c/">Typecasting in C</a></h1>
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2017-01-19T00:53:00+08:00">Thu 19 Jan 2017, 00:53</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../category/programming-languages.html">programming languages</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../tag/c.html">c</a> <a href="../tag/pointer.html">pointer</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>This post covers the typecasting in C with the aim to get a clear understanding
of the most commonly-seen C manipulation. This writeup is adapted from
&quot;Hacking - the Art of Exploitation&quot;.</p>
<div class="section" id="tl-dr">
<h2>TL;DR</h2>
<ul class="simple">
<li>Typecasting change a variable into a different type just for that operation.</li>
<li>Pointer type determines the size of the data it points to. In other words, when you
do pointer arithemetic (i.e <tt class="docutils literal">+</tt>), the number of bytes change (i.e increase) in terms of memory
address is determined by the pointer type.</li>
<li><tt class="docutils literal">void</tt> pointer is a generic pointer and we need to cast them to the proper data type in order to
de-reference it.</li>
<li>Pointer is merely a memory address. With typecasting, any type with enough size to hold
the memory address can work like a pointer.</li>
</ul>
</div>
<div class="section" id="details">
<h2>Details</h2>
<p>Typecasting is simply a way to temporarily change a variable's data type,
despite how it was originally define. When a variable is typecast into a different type,
the compiler is basically told to treat that variable as if it were the new data type,
but <em>only for that operation</em>.</p>
<p>Typecasting is mostly used with pointers. Before we jump into typecasting, let's take a look
why we need to define type for pointer (pointer is just a memory address). One reason for this
is to try to limit programming errors. An integer pointer should only point to integer data, while
a character pointer should only point to character data. Another reason is for pointer arithmetic.
An integer is four bytes in size, while a character only takes up a single byte.</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">char</span> <span class="n">char_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
  <span class="kt">int</span> <span class="n">int_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>

  <span class="kt">char</span> <span class="o">*</span><span class="n">char_pointer</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">int_pointer</span><span class="p">;</span>

  <span class="n">char_pointer</span> <span class="o">=</span> <span class="n">char_array</span><span class="p">;</span>
  <span class="n">int_pointer</span> <span class="o">=</span> <span class="n">int_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[integer pointer] points to %p, which contains the integer %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">int_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">int_pointer</span><span class="o">++</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[char pointer] points to %p, which contains the char &#39;%c&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">char_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">char_pointer</span><span class="o">++</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The program itself is pretty straightforward. Here is the output:</p>
<pre class="literal-block">
[integer pointer] points to 0x7ffd90db45a4, which contains the integer 1
[integer pointer] points to 0x7ffd90db45a8, which contains the integer 2
[integer pointer] points to 0x7ffd90db45ac, which contains the integer 3
[integer pointer] points to 0x7ffd90db45b0, which contains the integer 4
[integer pointer] points to 0x7ffd90db45b4, which contains the integer 5
[char pointer] points to 0x7ffd90db45c1, which contains the char 'a'
[char pointer] points to 0x7ffd90db45c2, which contains the char 'b'
[char pointer] points to 0x7ffd90db45c3, which contains the char 'c'
[char pointer] points to 0x7ffd90db45c4, which contains the char 'd'
[char pointer] points to 0x7ffd90db45c5, which contains the char 'e'
</pre>
<p>Even though the same value of 1 is added to <tt class="docutils literal">int_pointer</tt> and <tt class="docutils literal">char_pointer</tt>
in their respective loops, the compiler increments the pointer's addresses by different
amounts. Since a char is only 1 byte, the pointer to the next char would naturally also be 1 byte over.
But since an integer is 4 bytes, a pointer to the next integer has to be 4 bytes over.</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">char</span> <span class="n">char_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
  <span class="kt">int</span> <span class="n">int_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>

  <span class="kt">char</span> <span class="o">*</span><span class="n">char_pointer</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">int_pointer</span><span class="p">;</span>

  <span class="c1">// The char_pointer and int_pointer now point to incompatible data types.</span>
  <span class="n">char_pointer</span> <span class="o">=</span> <span class="n">int_array</span><span class="p">;</span>
  <span class="n">int_pointer</span> <span class="o">=</span> <span class="n">char_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[integer pointer] points to %p, which contains the integer %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">int_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">int_pointer</span><span class="o">++</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[char pointer] points to %p, which contains the char &#39;%d&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">char_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">char_pointer</span><span class="o">++</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The output is:</p>
<pre class="literal-block">
$ gcc pointer_types2.c
pointer_types2.c: In function ‘main’:
pointer_types2.c:13: warning: assignment from incompatible pointer type
pointer_types2.c:14: warning: assignment from incompatible pointer type
</pre>
<p>Here, the compiler and the programmer are the only ones that care about a pointer's type.
In the compiled code, a pointer is nothing more than a memory address, so the compiler
will still compile the code if a pointer points to an incompatible data type - it simply warns us
to anticipate unexpected results.:</p>
<pre class="literal-block">
[integer pointer] points to 0x7ffe2d481324, which contains the integer a
[integer pointer] points to 0x7ffe2d481328, which contains the integer e
[integer pointer] points to 0x7ffe2d48132c, which contains the integer ▒
[integer pointer] points to 0x7ffe2d481330, which contains the integer
[integer pointer] points to 0x7ffe2d481334, which contains the integer
[char pointer] points to 0x7ffe2d481301, which contains the char '1'
[char pointer] points to 0x7ffe2d481302, which contains the char '0'
[char pointer] points to 0x7ffe2d481303, which contains the char '0'
[char pointer] points to 0x7ffe2d481304, which contains the char '0'
[char pointer] points to 0x7ffe2d481305, which contains the char '2'
</pre>
<p>Even though <tt class="docutils literal">int_pointer</tt> points to character data that only contains 5 bytes of data, it is still
typed as an integer. This means that adding 1 to the pointer will increment the address by 4 each time.
Similarly, the <tt class="docutils literal">char_pointer</tt>'s address is only incremented by 1 each time, stepping through the 20 bytes
of integer data, one byte at a time. So, we need to make sure that pointer type is correct. This is the place where
we need typecasting.</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">char</span> <span class="n">char_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
  <span class="kt">int</span> <span class="n">int_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>

  <span class="kt">char</span> <span class="o">*</span><span class="n">char_pointer</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">int_pointer</span><span class="p">;</span>

  <span class="n">char_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">int_array</span><span class="p">;</span>
  <span class="n">int_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">char_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[integer  pointer] points to %p, which contains the integer %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">int_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">int_pointer</span><span class="p">);</span>
    <span class="n">int_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">int_pointer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[char pointer] points to %p, which contains the char &#39;%d&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">char_pointer</span><span class="p">,</span> <span class="o">*</span><span class="n">char_pointer</span><span class="p">);</span>
    <span class="n">char_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">char_pointer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Typecasting is just a way to change the type of a variable on the fly. In the above code, when the pointers
are initially set, the data is typecast into the pointer's data type. This will prevent the C compiler from complaining
about the conflicting data types; however, any pointer arithmetic will still be incorrect (because typecasting is just
for that one operation). To fix that, when 1 is added to the pointers, they must first be typecast into the correct data type
so the address is incremented by the correct amount. Then this pointer needs to be typecast back into the pointer's data type
once again. It works but in a not beautiful way.:</p>
<pre class="literal-block">
[integer pointer] points to 0x7ffd484ac470, which contains the integer a
[integer pointer] points to 0x7ffd484ac471, which contains the integer b
[integer pointer] points to 0x7ffd484ac472, which contains the integer c
[integer pointer] points to 0x7ffd484ac473, which contains the integer d
[integer pointer] points to 0x7ffd484ac474, which contains the integer e
[char pointer] points to 0x7ffd484ac450, which contains the char '1'
[char pointer] points to 0x7ffd484ac454, which contains the char '2'
[char pointer] points to 0x7ffd484ac458, which contains the char '3'
[char pointer] points to 0x7ffd484ac45c, which contains the char '4'
[char pointer] points to 0x7ffd484ac460, which contains the char '5'
</pre>
<p>Sometimes, we probably want to use a generic, typeless pointer. In C, a void pointer is a typeless pointer, defined by the <tt class="docutils literal">void</tt> keyword.
Here are two things we need to note:</p>
<blockquote>
<ul class="simple">
<li>pointers cannot be de-referenced unless they have a type. In order to retrieve the value stored in the pointer's memory address, the
compiler must first know what type of data it is.</li>
<li>void pointers must also be typecast before doing pointer arithmetic, which indicates that a void pointer's main purpose is to simply hold a
memory address.</li>
</ul>
</blockquote>
<p>Let's rewrite our program.</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">char</span> <span class="n">char_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
  <span class="kt">int</span> <span class="n">int_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>

  <span class="kt">void</span> <span class="o">*</span><span class="n">void_pointer</span><span class="p">;</span>

  <span class="n">void_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">char_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[char pointer] points to %p, which contains the char %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">void_pointer</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">void_pointer</span><span class="p">));</span>
    <span class="n">void_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">void_pointer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">void_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">int_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[integer pointer] points to %p, which contains the integer %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">void_pointer</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">void_pointer</span><span class="p">));</span>
    <span class="n">void_pointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">void_pointer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The output is:</p>
<pre class="literal-block">
[char pointer] points to 0x7fff06cf8de0, which contains the char a
[char pointer] points to 0x7fff06cf8de1, which contains the char b
[char pointer] points to 0x7fff06cf8de2, which contains the char c
[char pointer] points to 0x7fff06cf8de3, which contains the char d
[char pointer] points to 0x7fff06cf8de4, which contains the char e
[integer pointer] points to 0x7fff06cf8dc0, which contains the integer 1
[integer pointer] points to 0x7fff06cf8dc4, which contains the integer 2
[integer pointer] points to 0x7fff06cf8dc8, which contains the integer 3
[integer pointer] points to 0x7fff06cf8dcc, which contains the integer 4
[integer pointer] points to 0x7fff06cf8dd0, which contains the integer 5
</pre>
<p>The void pointer is really just holding the memory addresses, while the hard-coded typecasting
is telling the compiler to use the proper types whenever the pointer is used. Since the type is
taken care of by the typecasts, the void pointer is truly nothin more than a memory address.
With the data types defined by typecasting, anything that is big enough to hold a four-byte or eight-byte value can
work the same way as a void pointer.</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">char</span> <span class="n">char_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
  <span class="kt">int</span> <span class="n">int_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>

  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span> <span class="n">hacky_nonpointer</span><span class="p">;</span>

  <span class="n">hacky_nonpointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span><span class="p">)</span><span class="n">char_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[hacky_nonpointer] points to %p, which contains the char %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">hacky_nonpointer</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">hacky_nonpointer</span><span class="p">));</span>
    <span class="n">hacky_nonpointer</span> <span class="o">=</span> <span class="n">hacky_nonpointer</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">hacky_nonpointer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span><span class="p">)</span><span class="n">int_array</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[hacky_nonpointer] points to %p, which contains the integer %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">hacky_nonpointer</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">hacky_nonpointer</span><span class="p">));</span>
    <span class="n">hacky_nonpointer</span> <span class="o">=</span> <span class="n">hacky_nonpointer</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Note that I use <tt class="docutils literal">unsigned long int</tt> because I'm on a 64-bit system. <tt class="docutils literal">unsigned int</tt> is enough for 32-bit system.:</p>
<pre class="literal-block">
[hacky_nonpointer] points to 0x7fff3e378360, which contains the char a
[hacky_nonpointer] points to 0x7fff3e378361, which contains the char b
[hacky_nonpointer] points to 0x7fff3e378362, which contains the char c
[hacky_nonpointer] points to 0x7fff3e378363, which contains the char d
[hacky_nonpointer] points to 0x7fff3e378364, which contains the char e
[hacky_nonpointer] points to 0x7fff3e378340, which contains the integer 1
[hacky_nonpointer] points to 0x7fff3e378344, which contains the integer 2
[hacky_nonpointer] points to 0x7fff3e378348, which contains the integer 3
[hacky_nonpointer] points to 0x7fff3e37834c, which contains the integer 4
[hacky_nonpointer] points to 0x7fff3e378350, which contains the integer 5
</pre>
<p>The important thing to remember about variables in C is that the compiler is the
only thing that care about a variable's type. In the end, after the program has been compiled,
the variables are nothing more than memory addresses. This means that variables of one type can easily be coerced into
behaving like another type by telling the compiler to typecast them into the desired type.</p>
</div>

        </article></aside><!-- /#featured -->
                <h1><i class="fa fa-bars"></i> Other articles</h1>
                <hr />
                    <ol id="posts-list" class="hfeed">
        <li><article class="hentry">
                <header>
                        <h1><a href="../posts/2017/Jan/11/difference-between-i-and-i/" rel="bookmark" title="Permalink to Difference between i++ and ++i">Difference between <tt class="docutils literal">i++</tt> and <tt class="docutils literal">++i</tt></a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2017-01-11T22:39:00+08:00">Wed 11 Jan 2017, 22:39</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../category/programming-languages.html">programming languages</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../tag/c.html">c</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>I'm starting to read through <a class="reference external" href="https://www.amazon.com/Hacking-Art-Exploitation-Jon-Erickson/dp/1593271441">Hacking: The Art of Exploitation</a> on
my four hours daily commute to work in order to get myself more comfortable working with C. I resolve a puzzle I have about C, as shown in the title.</p>
<ul class="simple">
<li><tt class="docutils literal">i++</tt> means increment the value of <tt class="docutils literal">i</tt> by ...</li></ul>
                <a class="readmore" href="../posts/2017/Jan/11/difference-between-i-and-i/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="../posts/2017/Jan/08/modify-array-inside-function-in-c/" rel="bookmark" title="Permalink to Modify array inside function in C">Modify array inside function in C</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2017-01-08T09:23:00+08:00">Sun 08 Jan 2017, 09:23</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../category/programming-languages.html">programming languages</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../tag/c.html">c</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>In this post, I want to write down the lesson learned
about modifying array inside a function in C with an example
from MAW 3.15.a:</p>
<blockquote>
Write an array implementation of self-adjusting lists.
A self-adjusting list is like a regular list, except that
all insertions are performed at the ...</blockquote>
                <a class="readmore" href="../posts/2017/Jan/08/modify-array-inside-function-in-c/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/" rel="bookmark" title="Permalink to Josephus Problem & Radix Sort Reflection">Josephus Problem &amp; Radix Sort Reflection</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2017-01-06T00:34:00+08:00">Fri 06 Jan 2017, 00:34</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../category/programming-languages.html">programming languages</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../tag/c.html">c</a> <a href="../tag/circular-double-linked-list.html">circular-double-linked-list</a> <a href="../tag/double-linked-list.html">double-linked-list</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>This post is a reflection on the two problems (MAW 3.13 &amp; 3.10) I
have been working on for the past five days.</p>
<div class="section" id="dynamic-arrays-in-c">
<h2>Dynamic arrays in C</h2>
<p>One of the ways I try out to solve <a class="reference external" href="../posts/2016/Dec/31/josephus-problem/">Josephus Problem</a> is to use circular double linked list, which
is implemented in ...</p></div>
                <a class="readmore" href="../posts/2017/Jan/06/josephus-problem-radix-sort-reflection/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="../posts/2016/Dec/24/a-small-c-trick-i-learned-today/" rel="bookmark" title="Permalink to A small C trick I learned today">A small C trick I learned today</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
    <p><i class="fa fa-calendar-o fa-fw"></i> <abbr style="padding: 0 1px" class="published" title="2016-12-24T23:11:00+08:00">Sat 24 Dec 2016, 23:11</abbr></p>

<p><i class="fa fa-folder-open fa-fw"></i> <a href="../category/programming-languages.html">programming languages</a> </p>
<p><i class="fa fa-tags fa-fw"></i>&nbsp;<a href="../tag/c.html">c</a> </p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>Today I learned a C trick. Here is my original <tt class="docutils literal">printList</tt>:</p>
<div class="highlight"><pre><span></span><span class="kt">void</span>
<span class="nf">printList</span><span class="p">(</span><span class="n">List</span> <span class="n">L</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Pos</span> <span class="n">dummy</span><span class="p">;</span> <span class="c1">// creates a dummy node to traverse the list</span>

  <span class="n">dummy</span> <span class="o">=</span> <span class="n">L</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="n">dummy</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d-&gt;&quot;</span><span class="p">,</span> <span class="n">dummy</span><span class="o">-&gt;</span><span class="n">Element</span><span class="p">);</span>
    <span class="n">dummy</span> <span class="o">=</span> <span class="n">dummy</span><span class="o">-&gt;</span><span class="n">Next</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>It works but there is a small caveat in this routine. This ...</p>
                <a class="readmore" href="../posts/2016/Dec/24/a-small-c-trick-i-learned-today/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
</section><!-- /#content -->

        <aside id="sidebar">
          <!-- <div class="widget" id="book" role="book">
<h2><i class="fa fa-book fa-lg"></i> MySQL 5.1 Plugins Development</h2>
<a href="https://www.packtpub.com/mysql-5-1-plugins-development/book"><img border="0" style="float:left" src="../theme/images/0608OS_MockupCover_sm.png" />
MySQL 5.1 Plugins Development by Andrew Hutchings and Sergei Golubchik is now available from Packt Publishing.</a>
<br style="clear:left;" />
</div> -->
<!--          <h2><i class="fa fa-twitter fa-lg"></i> Twitter Feed</h2>
<a class="twitter-timeline" data-width="280" data-height="300" href="https://twitter.com/zeyuanhu">Tweets by zeyuanhu</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>-->
                <div class="widget">
                        <h2><i class="fa fa-home fa-lg"></i> Categories</h2>
                        <ul>
                           <li ><a href="../category/data-struct-and-algo-analysis-in-c.html"><i class="fa fa-folder-open fa-lg"></i> Data Struct and Algo Analysis in C (11)</a></li>
                           <li ><a href="../category/misc.html"><i class="fa fa-folder-open fa-lg"></i> misc (3)</a></li>
                           <li class="active"><a href="../category/programming-languages.html"><i class="fa fa-folder-open fa-lg"></i> programming languages (5)</a></li>
                           <li ><a href="../category/tools.html"><i class="fa fa-folder-open fa-lg"></i> tools (5)</a></li>
                        </ul>
                </div>
                <div class="widget social">
                        <h2><i class="fa fa-comments fa-lg"></i> Social</h2>
                        <ul>
                            <!-- <li><a href="../None" rel="alternate"><i class="fa fa-rss-square fa-lg"></i> RSS feed</a></li> -->
                            <!--  -->

                            <li><a href="http://github.com/xxks-kkk"><i class="fa fa-github fa-lg"></i> GitHub</a></li>
                            <li><a href="http://stackoverflow.com/users/1460102/jerry"><i class="fa fa-stack-overflow fa-lg"></i> Stack Overflow</a></li>
                            <li><a href="http://zeyuanhu.wordpress.com/"><i class="fa fa-wordpress fa-lg"></i> WordPress</a></li>
                            <li><a href="https://cn.linkedin.com/in/zhu45"><i class="fa fa-linkedin fa-lg"></i> LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
            <div class="widget tags">
            <h2><i class="fa fa-tags fa-lg"></i>Tags</h2>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-4">
                        <a href="../tag/aix.html">
                            AIX
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="../tag/c.html">
                            c
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/call-stack.html">
                            call-stack
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/circular-double-linked-list.html">
                            circular-double-linked-list
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/double-linked-list.html">
                            double-linked-list
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/dynamic-programming.html">
                            dynamic-programming
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/emacs.html">
                            emacs
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/github.html">
                            github
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/jinja.html">
                            Jinja
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="../tag/math.html">
                            math
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="../tag/meta.html">
                            meta
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/pointer.html">
                            pointer
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/proof.html">
                            proof
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="../tag/recursion.html">
                            recursion
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/sed.html">
                            sed
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="../tag/shell.html">
                            shell
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="../tag/singly-linked-list.html">
                            singly-linked-list
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="../tag/software-engineering.html">
                            software-engineering
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="../tag/travis-ci.html">
                            travis-ci
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="../tag/trees.html">
                            trees
                        </a>
                    </li>
                </ul>
            </div>
        </aside><!-- /#sidebar -->

        <!-- <footer id="footer" class="body"> -->
        <!--         <address id="about" class="vcard body"> -->
        <!--         Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>. -->
        <!--         </address><\!-- /#about -\-> -->
        <!--         <p>The LinuxJedi logo and the content of this blog is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p> -->
        <!-- </footer><\!-- /#footer -\-> -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-37565522-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>